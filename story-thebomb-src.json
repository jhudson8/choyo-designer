{"title":"The Bomb!","pages":{"main":{"transitions":[{"id":"diffuseBomb","label":"Try to diffuse the bomb"},{"id":"lookAround","label":"Look around"}],"content":"After <input type=\"text\" ref=\"name\" defaultValue={this.name}/> enters the room, he hears a strange ticking sound.  After investigating, he sees a bomb hidden behind the door!<br/>\n","onLeave":""},"diffuseBomb":{"transitions":[{"id":"bombCodeEntered","label":"Enter bomb code"},{"id":"bombExploded","label":"Cut the red wire"},{"id":"bombExploded","label":"Cut the green wire"},{"id":"bombDiffused","label":"Cut the blue wire"},{"id":"lookAround","label":"Look around the room"}],"content":"{this.name} tries to diffuse the bomb by entering the code or cutting one of the wires.  As he makes the decision, {this.name}'s life flashes before his eyes.<br/>\n<br/>\nBomb code:  <input type=\"text\" ref=\"bombCode\" defaultValue={this.bombCode}/>","onLeave":"if (id == \"bombCodeEntered\") {\n  if (!this.bombCode) {\n    alert(\"don't you want to enter a bomb code first?\");\n    // don't go anywhere\n    return false;\n  }\n\n  if (this.bombCode == this.correctBombCode) {\n    // the correct bomb code was entered\n    return \"bombDiffused\";\n  } else {\n    // a bad code was entered so... EXPLODE\n    this.explodeReason = \"entered the wrong code and the bomb exploded\";\n    return \"bombExploded\";\n  }\n}"},"lookAround":{"transitions":[{"id":"lookAround","label":"Look around some more"},{"id":"diffuseBomb","label":"Try to diffuse the bomb"}],"content":"{this.name} finds {this.thingToFind}.","onLeave":"// the \"id\" value is the page id that the user chose\nif (id === \"lookAround\") {\n\n  // there is a 25% chance they trigger the bomb\n  if (Math.random() < 0.25) {\n\n    // change the selected next page and go to the bomb exploded page\n    this.explodeReason = \"was was walking around and accidentally tripped the motion sensors on the bomb and it exploded.  This might not turn out the same way if he tried again..\"\n    return \"bombExploded\";\n  }\n}\n","onShow":"// 35% chance they will find the bomb code\nif (Math.random() < 0.35) {\n  this.thingToFind = \"A piece of paper with \" + this.correctBombCode + \" written on it\";\n} else {\n  // find a random thing that has no value\n  var thingToFind = this.oneOf([\n    \"pair of shoes\",\n    \"cereal box\",\n    \"picture on the wall\",\n    \"television remote control\",\n    \"newspaper\"\n  ]);\n  this.thingToFind = \"an uninteristing \" + thingToFind;\n}\n"},"bombDiffused":{"transitions":[],"content":"{this.name} diffused the bomb and saved the day!<br/>\n<br/>\nThe end."},"bombExploded":{"transitions":[],"content":"{this.name} {this.explodeReason}.<br/>\n<br/>\nThe end."}},"variables":{},"style":"","setup":"// the default name if your character\nthis.name = 'Billy';\n\n// the randomly generated bomb code\nthis.correctBombCode = this.randomNumber(1000, 9999);\n"}

